<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'/>
<!-- <meta charset='utf-8' http-equiv='refresh' content='50'/> -->
<title>Triangles!</title>

<style type='text/css'>
/*canvas { border: 1px solid black; }*/
</style>

</head>
<body>
<script type='text/javascript'>

// create and attach the canvas
const canvas = document.createElement('canvas')
canvas.width = 800
canvas.height = 600
document.body.appendChild(canvas)

const ctx = canvas.getContext('2d')

// define the triangle
const triangle = {
  top_vertex: {x: canvas.width / 2, y: 0},
  left_vertex: {x: 0, y: canvas.height},
  right_vertex: {x: canvas.width, y: canvas.height}
}

// draw the triangle to the canvas
drawTriangle(triangle)

// create our coordinate variables
let x = 0
let y = 0

// add event listener to respond to mouse click and set initial coordinates
document.addEventListener('click', (event) => {
  x = event.x
  y = event.y
  setInterval(run, 10)
})

function drawTriangle(triangle) {
  ctx.beginPath()
  ctx.moveTo(triangle.top_vertex.x, triangle.top_vertex.y)
  ctx.lineTo(triangle.left_vertex.x, triangle.left_vertex.y)
  ctx.lineTo(triangle.right_vertex.x, triangle.right_vertex.y)
  ctx.closePath()
  ctx.stroke()
}

function drawPoint(){
  ctx.fillRect(x, y, 1, 1)
}

function setNextCoordinates() {
  const vertices = [triangle.top_vertex, triangle.left_vertex, triangle.right_vertex]
  const random_vertex = vertices[Math.floor(Math.random() * vertices.length)]
  x = ((x + random_vertex.x) / 2.0)
  y = ((y + random_vertex.y) / 2.0)
}

function run() {
  drawPoint()
  setNextCoordinates()
}

</script>
</body>
</html>
